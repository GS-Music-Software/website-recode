---
import { Github } from "@lucide/astro";
---

<section class="relative overflow-hidden">
  <div class="pointer-events-none absolute inset-0 flex items-start justify-center" aria-hidden="true">
    <div class="relative flex h-max w-max items-center justify-center opacity-50" style="filter: blur(120px); animation: spin-slow 20s linear infinite;">
      <div class="absolute h-[40rem] w-[40rem] rounded-full bg-rose-600" style="transform: translate(-20%, 0)"></div>
      <div class="absolute h-[40rem] w-[40rem] rounded-full bg-primary" style="transform: translate(10%, -35%)"></div>
      <div class="absolute h-[40rem] w-[40rem] rounded-full bg-rose-800" style="transform: translate(10%, 35%)"></div>
    </div>
  </div>

  <div class="relative z-10 mx-auto flex max-w-[1300px] flex-col items-center px-4 pt-28 pb-20 text-center sm:px-8 lg:px-16 lg:pt-32">
    <a href="#" class="mb-6 inline-flex items-center gap-2 rounded-full border border-border bg-surface/60 px-4 py-1.5 text-sm text-muted transition-colors duration-200 hover:text-foreground">
      <span class="text-foreground">New Release: GS Music 2.0.1</span>
      <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
    </a>
    <h1 class="mb-5 max-w-[700px] text-4xl font-extrabold tracking-tight lg:text-5xl xl:text-6xl">
      The music player<br />you deserve.
    </h1>

    <p class="mx-auto max-w-[560px] text-lg text-muted lg:text-xl">
      An open source, free music player with a plethora of features built right in.
    </p>

    <div class="mt-10 flex items-center gap-3">
      <button
        id="download-btn"
        class="rounded-md bg-primary px-5 py-2.5 text-sm font-semibold text-white cursor-pointer"
      >
        Download
      </button>
      <a
        href="https://github.com/gavinstrikes"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-muted transition-colors duration-200 hover:text-foreground"
      >
        <Github class="h-4 w-4" />
        Source Code
      </a>
    </div>

    <div class="carousel" id="carousel">
      <div class="carousel-track">
        <div class="carousel-slide" data-index="0">
          <div class="slide-clip"><img src="/app-screenshot.png" alt="GS Music" /></div>
        </div>
        <div class="carousel-slide" data-index="1">
          <div class="slide-clip"><img src="/screenshot-2.png" alt="GS Music" /></div>
        </div>
        <div class="carousel-slide" data-index="2">
          <div class="slide-clip"><img src="/screenshot-3.png" alt="GS Music" /></div>
        </div>
      </div>
      <div class="carousel-dots">
        <button class="carousel-dot active" data-index="0" aria-label="Slide 1"></button>
        <button class="carousel-dot" data-index="1" aria-label="Slide 2"></button>
        <button class="carousel-dot" data-index="2" aria-label="Slide 3"></button>
      </div>
    </div>

  </div>
</section>

<style>
  .carousel {
    position: relative;
    width: 100%;
    max-width: 1200px;
    height: 580px;
    margin-top: 0.5rem;
    perspective: 1200px;
    user-select: none;
  }

  .carousel-track {
    position: relative;
    width: 100%;
    height: 100%;
    transform-style: preserve-3d;
  }

  .carousel-slide {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 75%;
    transform: translate(-50%, -50%) scale(0.7);
    opacity: 0;
    transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1),
                opacity 0.6s cubic-bezier(0.23, 1, 0.32, 1);
    pointer-events: none;
    z-index: 0;
  }

  .slide-clip {
    border-radius: 16px;
    overflow: hidden;
    isolation: isolate;
  }

  .carousel-slide img {
    width: 100%;
    display: block;
    filter: blur(10px) brightness(0.35);
    transform: scale(1.08);
    transition: filter 0.6s cubic-bezier(0.23, 1, 0.32, 1),
                transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
  }

  .carousel-slide[data-pos="center"] {
    transform: translate(-50%, -50%) scale(1) rotateY(0deg);
    opacity: 1;
    z-index: 3;
    pointer-events: auto;
    cursor: pointer;
  }

  .carousel-slide[data-pos="center"] .slide-clip {
    box-shadow: 0 24px 80px rgba(0, 0, 0, 0.5);
  }

  .carousel-slide[data-pos="center"] img {
    filter: blur(0) brightness(1);
    transform: scale(1);
  }

  .carousel-slide[data-pos="left"] {
    transform: translate(-105%, -50%) scale(0.65) rotateY(10deg);
    opacity: 0.3;
    z-index: 1;
    pointer-events: auto;
    cursor: pointer;
  }

  .carousel-slide[data-pos="right"] {
    transform: translate(5%, -50%) scale(0.65) rotateY(-10deg);
    opacity: 0.3;
    z-index: 1;
    pointer-events: auto;
    cursor: pointer;
  }

  .carousel-slide[data-pos="far-left"] {
    transform: translate(-140%, -50%) scale(0.5) rotateY(16deg);
    opacity: 0;
    z-index: 0;
  }

  .carousel-slide[data-pos="far-right"] {
    transform: translate(40%, -50%) scale(0.5) rotateY(-16deg);
    opacity: 0;
    z-index: 0;
  }

  .carousel-dots {
    display: flex;
    justify-content: center;
    gap: 8px;
    margin-top: 20px;
  }

  .carousel-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.15);
    border: none;
    cursor: pointer;
    padding: 0;
    transition: all 0.3s ease;
  }

  .carousel-dot.active {
    background: var(--color-primary);
    box-shadow: 0 0 8px rgba(252, 60, 68, 0.4);
  }

  @media (max-width: 768px) {
    .carousel {
      height: 300px;
      margin-top: 0.5rem;
    }

    .carousel-slide {
      width: 85%;
    }

    .carousel-slide[data-pos="left"] {
      transform: translate(-100%, -50%) scale(0.6) rotateY(8deg);
    }

    .carousel-slide[data-pos="right"] {
      transform: translate(0%, -50%) scale(0.6) rotateY(-8deg);
    }
  }

  @media (min-width: 1024px) {
    .carousel {
      margin-top: 0.5rem;
      height: 650px;
    }
  }
</style>

<div id="download-modal" class="fixed inset-0 z-50 hidden items-center justify-center" style="backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);">
  <div id="download-panel" class="relative mx-4 w-full max-w-[400px] overflow-hidden rounded-2xl border border-border" style="opacity: 0; transform: scale(0.92) translateY(16px); transition: opacity 0.2s cubic-bezier(0.16, 1, 0.3, 1), transform 0.3s cubic-bezier(0.16, 1, 0.3, 1); background: rgba(28, 25, 23, 0.7); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px);">
    <div class="pointer-events-none absolute inset-0 overflow-hidden rounded-2xl">
      <div class="absolute -top-20 -right-20 h-40 w-40 rounded-full bg-primary opacity-[0.07]" style="filter: blur(60px);"></div>
    </div>

    <div id="platform-view" class="relative" style="transition: opacity 0.2s ease, transform 0.2s ease;">
      <div class="px-6 pt-6 pb-5">
        <h3 class="text-lg font-semibold text-foreground">Download GS Music</h3>
        <p class="mt-1 text-sm text-muted">Choose your platform</p>
      </div>

      <div class="flex flex-col gap-3 px-6 pb-3">
        <button id="linux-btn" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4 text-left cursor-pointer">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 24 24" fill="currentColor"><path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 0 0-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 0 0-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139z"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">Linux</span>
            <span class="text-[13px] text-muted">.rpm / .deb / .AppImage</span>
          </div>
          <svg class="ml-auto h-4 w-4 text-faint" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </button>

        <a href="#" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 88 88" fill="currentColor"><path d="M0 12.402l35.687-4.86.016 34.423-35.67.203zm35.67 33.529l.028 34.453L.028 71.48l-.026-25.55zm4.326-39.025L87.314 0v41.527l-47.318.376zm47.329 39.349l-.011 41.34-47.318-6.678-.066-34.739z"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">Windows</span>
            <span class="text-[13px] text-muted">.exe installer</span>
          </div>
          <svg class="ml-auto h-4 w-4 text-faint" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>
        </a>
      </div>

      <div class="px-6 pt-1 pb-5">
        <button id="download-close" class="w-full rounded-xl py-2.5 text-sm font-medium text-subtle transition-colors duration-150 hover:text-foreground cursor-pointer">
          Cancel
        </button>
      </div>
    </div>

    <div id="distro-view" class="relative hidden" style="transition: opacity 0.2s ease, transform 0.2s ease;">
      <div class="flex items-center gap-3 px-6 pt-6 pb-5">
        <button id="distro-back" class="flex h-8 w-8 shrink-0 items-center justify-center rounded-lg text-muted cursor-pointer">
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 12H5"/><path d="m12 19-7-7 7-7"/></svg>
        </button>
        <div>
          <h3 class="text-lg font-semibold text-foreground">Choose your distro</h3>
          <p class="mt-0.5 text-sm text-muted">Select a package format</p>
        </div>
      </div>

      <div class="flex flex-col gap-3 px-6 pb-3">
        <a href="#" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 24 24" fill="currentColor"><path d="M12.001 0C5.376 0 .008 5.369.004 11.992H.002v9.287h.002A2.726 2.726 0 002.73 24h9.275c6.626-.004 11.993-5.372 11.993-11.997C23.998 5.375 18.628 0 12 0zm2.431 4.94c2.015 0 3.917 1.543 3.917 3.671 0 .197.001.395-.03.619a1.002 1.002 0 01-1.137.893 1.002 1.002 0 01-.842-1.175 2.61 2.61 0 00.013-.337c0-1.207-.987-1.672-1.92-1.672-.934 0-1.775.784-1.777 1.672.016 1.027 0 2.046 0 3.07l1.732-.012c1.352-.028 1.368 2.009.016 1.998l-1.748.013c-.004.826.006.677.002 1.093 0 0 .015 1.01-.016 1.776-.209 2.25-2.124 4.046-4.424 4.046-2.438 0-4.448-1.993-4.448-4.437.073-2.515 2.078-4.492 4.603-4.469l1.409-.01v1.996l-1.409.013h-.007c-1.388.04-2.577.984-2.6 2.47a2.438 2.438 0 002.452 2.439c1.356 0 2.441-.987 2.441-2.437l-.001-7.557c0-.14.005-.252.02-.407.23-1.848 1.883-3.256 3.754-3.256z"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">Fedora / RHEL</span>
            <span class="text-[13px] text-muted">.rpm package</span>
          </div>
        </a>

        <a href="#" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 24 24" fill="currentColor"><path d="M13.88 12.685c-.4 0 .08.2.601.28.14-.1.27-.22.39-.33a3.001 3.001 0 01-.99.05m2.14-.53c.23-.33.4-.69.47-1.06-.06.27-.2.5-.33.73-.75.47-.07-.27 0-.56-.8 1.01-.11.6-.14.89m.781-2.05c.05-.721-.14-.501-.2-.221.07.04.13.5.2.22M12.38.31c.2.04.45.07.42.12.23-.05.28-.1-.43-.12m.43.12l-.15.03.14-.01V.43m6.633 9.944c.02.64-.2.95-.38 1.5l-.35.181c-.28.54.03.35-.17.78-.44.39-1.34 1.22-1.62 1.301-.201 0 .14-.25.19-.34-.591.4-.481.6-1.371.85l-.03-.06c-2.221 1.04-5.303-1.02-5.253-3.842-.03.17-.07.13-.12.2a3.551 3.552 0 012.001-3.501 3.361 3.362 0 013.732.48 3.341 3.342 0 00-2.721-1.3c-1.18.01-2.281.76-2.651 1.57-.6.38-.67 1.47-.93 1.661-.361 2.601.66 3.722 2.38 5.042.27.19.08.21.12.35a4.702 4.702 0 01-1.53-1.16c.23.33.47.66.8.91-.55-.18-1.27-1.3-1.48-1.35.93 1.66 3.78 2.921 5.261 2.3a6.203 6.203 0 01-2.33-.28c-.33-.16-.77-.51-.7-.57a5.802 5.803 0 005.902-.84c.44-.35.93-.94 1.07-.95-.2.32.04.16-.12.44.44-.72-.2-.3.46-1.24l.24.33c-.09-.6.74-1.321.66-2.262.19-.3.2.3 0 .97.29-.74.08-.85.15-1.46.08.2.18.42.23.63-.18-.7.2-1.2.28-1.6-.09-.05-.28.3-.32-.53 0-.37.1-.2.14-.28-.08-.05-.26-.32-.38-.861.08-.13.22.33.34.34-.08-.42-.2-.75-.2-1.08-.34-.68-.12.1-.4-.3-.34-1.091.3-.25.34-.74.54.77.84 1.96.981 2.46-.1-.6-.28-1.2-.49-1.76.16.07-.26-1.241.21-.37A7.823 7.824 0 0017.702 1.6c.18.17.42.39.33.42-.75-.45-.62-.48-.73-.67-.61-.25-.65.02-1.06 0C15.082.73 14.862.8 13.8.4l.05.23c-.77-.25-.9.1-1.73 0-.05-.04.27-.14.53-.18-.741.1-.701-.14-1.431.03.17-.13.36-.21.55-.32-.6.04-1.44.35-1.18.07C9.6.68 7.847 1.3 6.867 2.22L6.838 2c-.45.54-1.96 1.611-2.08 2.311l-.131.03c-.23.4-.38.85-.57 1.261-.3.52-.45.2-.4.28-.6 1.22-.9 2.251-1.16 3.102.18.27 0 1.65.07 2.76-.3 5.463 3.84 10.776 8.363 12.006.67.23 1.65.23 2.49.25-.99-.28-1.12-.15-2.08-.49-.7-.32-.85-.7-1.34-1.13l.2.35c-.971-.34-.57-.42-1.361-.67l.21-.27c-.31-.03-.83-.53-.97-.81l-.34.01c-.41-.501-.63-.871-.61-1.161l-.111.2c-.13-.21-1.52-1.901-.8-1.511-.13-.12-.31-.2-.5-.55l.14-.17c-.35-.44-.64-1.02-.62-1.2.2.24.32.3.45.33-.88-2.172-.93-.12-1.601-2.202l.15-.02c-.1-.16-.18-.34-.26-.51l.06-.6c-.63-.74-.18-3.102-.09-4.402.07-.54.53-1.1.88-1.981l-.21-.04c.4-.71 2.341-2.872 3.241-2.761.43-.55-.09 0-.18-.14.96-.991 1.26-.7 1.901-.88.7-.401-.6.16-.27-.151 1.2-.3.85-.7 2.421-.85.16.1-.39.14-.52.26 1-.49 3.151-.37 4.562.27 1.63.77 3.461 3.011 3.531 5.132l.08.02c-.04.85.13 1.821-.17 2.711l.2-.42M9.54 13.236l-.05.28c.26.35.47.73.8 1.01-.24-.47-.42-.66-.75-1.3m.62-.02c-.14-.15-.22-.34-.31-.52.08.32.26.6.43.88l-.12-.36m10.945-2.382l-.07.15c-.1.76-.34 1.511-.69 2.212.4-.73.65-1.541.75-2.362M12.45.12c.27-.1.66-.05.95-.12-.37.03-.74.05-1.1.1l.15.02M3.006 5.142c.07.57-.43.8.11.42.3-.66-.11-.18-.1-.42m-.64 2.661c.12-.39.15-.62.2-.84-.35.44-.17.53-.2.83"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">Debian / Ubuntu</span>
            <span class="text-[13px] text-muted">.deb package</span>
          </div>
        </a>

        <a href="#" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 24 24" fill="currentColor"><path d="M11.39.605C10.376 3.092 9.764 4.72 8.635 7.132c.693.734 1.543 1.589 2.923 2.554-1.484-.61-2.496-1.224-3.252-1.86C6.86 10.842 4.596 15.138 0 23.395c3.612-2.085 6.412-3.37 9.021-3.862a6.61 6.61 0 01-.171-1.547l.003-.115c.058-2.315 1.261-4.095 2.687-3.973 1.426.12 2.534 2.096 2.478 4.409a6.52 6.52 0 01-.146 1.243c2.58.505 5.352 1.787 8.914 3.844-.702-1.293-1.33-2.459-1.929-3.57-.943-.73-1.926-1.682-3.933-2.713 1.38.359 2.367.772 3.137 1.234-6.09-11.334-6.582-12.84-8.67-17.74z"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">Arch Linux</span>
            <span class="text-[13px] text-muted">AUR / PKGBUILD</span>
          </div>
        </a>

        <a href="#" class="flex items-center gap-4 rounded-xl border border-border bg-background px-5 py-4">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-lg bg-foreground/[0.06]">
            <svg class="h-5 w-5 text-foreground" viewBox="0 0 24 24" fill="currentColor"><path d="M12.504 0c-.155 0-.315.008-.48.021-4.226.333-3.105 4.807-3.17 6.298-.076 1.092-.3 1.953-1.05 3.02-.885 1.051-2.127 2.75-2.716 4.521-.278.832-.41 1.684-.287 2.489a.424.424 0 0 0-.11.135c-.26.268-.45.6-.663.839-.199.199-.485.267-.797.4-.313.136-.658.269-.864.68-.09.189-.136.394-.132.602 0 .199.027.4.055.536.058.399.116.728.04.97-.249.68-.28 1.145-.106 1.484.174.334.535.47.94.601.81.2 1.91.135 2.774.6.926.466 1.866.67 2.616.47.526-.116.97-.464 1.208-.946.587-.003 1.23-.269 2.26-.334.699-.058 1.574.267 2.577.2.025.134.063.198.114.333l.003.003c.391.778 1.113 1.132 1.884 1.071.771-.06 1.592-.536 2.257-1.306.631-.765 1.683-1.084 2.378-1.503.348-.199.629-.469.649-.853.023-.4-.2-.811-.714-1.376v-.097l-.003-.003c-.17-.2-.25-.535-.338-.926-.085-.401-.182-.786-.492-1.046h-.003c-.059-.054-.123-.067-.188-.135a.357.357 0 0 0-.19-.064c.431-1.278.264-2.55-.173-3.694-.533-1.41-1.465-2.638-2.175-3.483-.796-1.005-1.576-1.957-1.56-3.368.026-2.152.236-6.133-3.544-6.139z"/></svg>
          </div>
          <div class="flex flex-col">
            <span class="text-[15px] font-semibold text-foreground">AppImage</span>
            <span class="text-[13px] text-muted">Universal Linux</span>
          </div>
        </a>
      </div>

      <div class="px-6 pt-1 pb-5">
        <button id="download-close-2" class="w-full rounded-xl py-2.5 text-sm font-medium text-subtle transition-colors duration-150 hover:text-foreground cursor-pointer">
          Cancel
        </button>
      </div>
    </div>
  </div>
</div>

<script>
  const btn = document.getElementById("download-btn");
  const modal = document.getElementById("download-modal");
  const panel = document.getElementById("download-panel");
  const close = document.getElementById("download-close");
  const close2 = document.getElementById("download-close-2");
  const linuxBtn = document.getElementById("linux-btn");
  const platformView = document.getElementById("platform-view");
  const distroView = document.getElementById("distro-view");
  const distroBack = document.getElementById("distro-back");

  const showPanel = () => {
    modal?.classList.remove("hidden");
    modal?.classList.add("flex");
    requestAnimationFrame(() => {
      requestAnimationFrame(() => {
        if (panel) {
          panel.style.opacity = "1";
          panel.style.transform = "scale(1) translateY(0)";
        }
      });
    });
  };

  const hide = () => {
    if (panel) {
      panel.style.opacity = "0";
      panel.style.transform = "scale(0.92) translateY(16px)";
    }
    setTimeout(() => {
      modal?.classList.add("hidden");
      modal?.classList.remove("flex");
      platformView?.classList.remove("hidden");
      distroView?.classList.add("hidden");
    }, 250);
  };

  btn?.addEventListener("click", () => {
    platformView?.classList.remove("hidden");
    distroView?.classList.add("hidden");
    showPanel();
  });

  linuxBtn?.addEventListener("click", () => {
    if (!platformView || !distroView) return;
    platformView.style.opacity = "0";
    platformView.style.transform = "translateX(-20px)";
    setTimeout(() => {
      platformView.classList.add("hidden");
      platformView.style.opacity = "";
      platformView.style.transform = "";
      distroView.classList.remove("hidden");
      distroView.style.opacity = "0";
      distroView.style.transform = "translateX(20px)";
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          distroView.style.opacity = "1";
          distroView.style.transform = "translateX(0)";
        });
      });
    }, 200);
  });

  distroBack?.addEventListener("click", () => {
    if (!platformView || !distroView) return;
    distroView.style.opacity = "0";
    distroView.style.transform = "translateX(20px)";
    setTimeout(() => {
      distroView.classList.add("hidden");
      distroView.style.opacity = "";
      distroView.style.transform = "";
      platformView.classList.remove("hidden");
      platformView.style.opacity = "0";
      platformView.style.transform = "translateX(-20px)";
      requestAnimationFrame(() => {
        requestAnimationFrame(() => {
          platformView.style.opacity = "1";
          platformView.style.transform = "translateX(0)";
        });
      });
    }, 200);
  });

  close?.addEventListener("click", hide);
  close2?.addEventListener("click", hide);
  modal?.addEventListener("click", (e) => {
    if (e.target === modal) hide();
  });
</script>

<script>
  const slides = document.querySelectorAll<HTMLElement>(".carousel-slide");
  const dots = document.querySelectorAll<HTMLElement>(".carousel-dot");
  const total = slides.length;
  let current = 0;
  let timer: ReturnType<typeof setInterval>;

  function set_positions() {
    slides.forEach((s) => s.removeAttribute("data-pos"));
    dots.forEach((d) => d.classList.remove("active"));
    const left = (current - 1 + total) % total;
    const right = (current + 1) % total;
    slides[left].setAttribute("data-pos", "left");
    slides[current].setAttribute("data-pos", "center");
    slides[right].setAttribute("data-pos", "right");
    dots[current].classList.add("active");
  }

  function go_to(idx: number) {
    current = ((idx % total) + total) % total;
    set_positions();
    reset_timer();
  }

  function reset_timer() {
    clearInterval(timer);
    timer = setInterval(() => go_to(current + 1), 5000);
  }

  slides.forEach((s) => {
    s.addEventListener("click", () => {
      const pos = s.getAttribute("data-pos");
      if (pos === "center") go_to(current + 1);
      else if (pos === "left") go_to(current - 1);
      else if (pos === "right") go_to(current + 1);
    });
  });

  dots.forEach((d, i) => {
    d.addEventListener("click", () => go_to(i));
  });

  set_positions();
  reset_timer();
</script>
